import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { Apple, Zap, Info, TrendingUp, Sparkles, Flame, Heart as HeartIcon, Plus, Target, Beaker, ShieldCheck } from 'lucide-react';
import { DIET_LIBRARY, SYNERGIES } from '../constants';

export const NutritionLibrary = () => {
  const [selectedItem, setSelectedItem] = useState(null);
  const [activeFilter, setActiveFilter] = useState('All');
  const [favorites, setFavorites] = useState([]);
  const categories = ["All", "Skin Matrix", "Hair Recovery", "Scalp Health", "Collagen"];
  const filteredItems = activeFilter === 'All'
    ? DIET_LIBRARY
    : DIET_LIBRARY.filter(i => i.category === activeFilter);

  const toggleFavorite = (id, e) => {
    e.stopPropagation();
    setFavorites(prev => prev.includes(id) ? prev.filter(f => f !== id) : [...prev, id]);
  };

  const getFoodIcon = (id) => {
    switch (id) {
      case 'walnuts':
      case 'almonds': return _jsx(Target, { className: "w-8 h-8 text-amber-400" });
      case 'salmon': return _jsx(ShieldCheck, { className: "w-8 h-8 text-indigo-400" });
      case 'avocado': return _jsx(HeartIcon, { className: "w-8 h-8 text-emerald-400" });
      case 'eggs': return _jsx(Beaker, { className: "w-8 h-8 text-amber-500" });
      case 'blueberries': return _jsx(Zap, { className: "w-8 h-8 text-violet-400" });
      case 'spinach':
      case 'green-tea': return _jsx(Flame, { className: "w-8 h-8 text-emerald-500" });
      case 'sweet-potatoes': return _jsx(Target, { className: "w-8 h-8 text-rose-400" });
      case 'pumpkin-seeds': return _jsx(Zap, { className: "w-8 h-8 text-amber-500" });
      case 'tomatoes': return _jsx(Target, { className: "w-8 h-8 text-rose-500" });
      case 'dark-chocolate': return _jsx(HeartIcon, { className: "w-8 h-8 text-amber-800" });
      default: return _jsx(Apple, { className: "w-8 h-8 text-amber-400" });
    }
  };

  return (_jsxs("div", { className: "w-full space-y-6 animate-fade-up", children: [_jsx("div", { className: "side-scroller no-scrollbar", children: categories.map(cat => (_jsx("button", { onClick: () => setActiveFilter(cat), className: `px-4 py-2 rounded-full border text-[9px] font-black uppercase tracking-widest whitespace-nowrap transition-all ${activeFilter === cat
            ? 'bg-amber-500 border-amber-400 text-black shadow-lg'
            : 'bg-white/5 border-white/10 text-white/30'}`, children: cat }, cat))) }), _jsxs("section", { className: "space-y-3", children: [_jsxs("div", { className: "flex items-center gap-2 px-1", children: [_jsx(TrendingUp, { className: "w-3 h-3 text-emerald-500" }), _jsx("span", { className: "text-[9px] font-black uppercase text-white/30 tracking-widest", children: "Target Nutrients" })] }), _jsx("div", { className: "side-scroller no-scrollbar", children: filteredItems.map((item) => (_jsx("button", { onClick: () => setSelectedItem(item), className: "w-40 flex flex-col gap-2 group transition-all text-left", children: _jsxs("div", { className: "relative aspect-[4/5] w-full p-4 rounded-3xl border border-white/5 card-3d flex flex-col justify-between items-start overflow-hidden", children: [item.image ? (_jsx("img", { src: item.image, className: "absolute inset-0 w-full h-full object-cover opacity-60 group-hover:scale-110 transition-transform duration-700", alt: item.food })) : (_jsx("div", { className: "p-3 bg-white/[0.03] rounded-2xl border border-white/5 relative z-10", children: getFoodIcon(item.id) })), _jsx("div", { className: "absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent pointer-events-none" }), _jsx("div", { className: "relative z-10 w-full flex justify-end", children: _jsx("button", { onClick: (e) => toggleFavorite(item.id, e), className: "p-1.5 rounded-full hover:bg-white/5", children: _jsx(HeartIcon, { className: `w-3.5 h-3.5 ${favorites.includes(item.id) ? 'fill-rose-500 text-rose-500' : 'text-white/20'}` }) }) }), _jsxs("div", { className: "relative z-10 space-y-0.5 mt-auto", children: [_jsx("span", { className: "text-[7px] font-black uppercase tracking-[0.2em] text-white/30", children: item.category }), _jsx("h4", { className: "text-base font-black text-white uppercase leading-none", children: item.food }), _jsx("p", { className: "text-[8px] font-bold text-amber-400/60 uppercase tracking-tighter truncate w-full", children: item.tagline })] })] }) }, item.id))) })] }), _jsxs("section", { className: "space-y-3", children: [_jsxs("div", { className: "flex items-center gap-2 px-1", children: [_jsx(Sparkles, { className: "w-3 h-3 text-amber-500" }), _jsx("span", { className: "text-[9px] font-black uppercase text-white/30 tracking-widest", children: "Synergy Pairs" })] }), _jsx("div", { className: "side-scroller no-scrollbar", children: SYNERGIES.map((syn, i) => (_jsxs("div", { className: "w-[240px] p-5 card-3d bg-indigo-600/5 border-indigo-500/10 flex flex-col gap-2", children: [_jsxs("div", { className: "flex justify-between items-center", children: [_jsxs("div", { className: "flex -space-x-1.5", children: [_jsx("div", { className: "w-6 h-6 rounded-full bg-indigo-500 border border-indigo-900 flex items-center justify-center text-[8px] font-black", children: "1" }), _jsx("div", { className: "w-6 h-6 rounded-full bg-emerald-500 border border-indigo-900 flex items-center justify-center text-[8px] font-black", children: "2" })] }), _jsxs("span", { className: "text-[10px] font-black text-amber-400", children: [syn.multiplier, " Boost"] })] }), _jsx("h4", { className: "text-[11px] font-black text-white uppercase tracking-tight", children: syn.title }), _jsxs("p", { className: "text-[9px] font-bold text-white/40 leading-tight", children: [syn.pair[0], " + ", syn.pair[1]] })] }, i))) })] }), selectedItem && (_jsxs("div", { className: "fixed inset-0 z-[100] p-4 flex items-center justify-center animate-fade-up", children: [_jsx("div", { className: "absolute inset-0 bg-black/95 backdrop-blur-2xl", onClick: () => setSelectedItem(null) }), _jsxs("div", { className: "w-full max-w-[340px] card-3d border-white/10 relative overflow-hidden flex flex-col max-h-[80dvh] shadow-2xl bg-[#080a18]", children: [_jsxs("div", { className: "p-8 pb-4 flex items-center justify-between border-b border-white/5", children: [_jsx("div", { className: "p-3 bg-white/[0.03] rounded-2xl border border-white/5", children: getFoodIcon(selectedItem.id) }), _jsx("button", { onClick: () => setSelectedItem(null), className: "w-8 h-8 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white/30", children: "\u00D7" })] }), _jsxs("div", { className: "p-6 overflow-y-auto no-scrollbar space-y-6", children: [_jsxs("header", { className: "space-y-1 text-center", children: [_jsxs("span", { className: "text-[10px] font-black uppercase text-amber-500 tracking-widest", children: [selectedItem.category, " Registry"] }), _jsx("h2", { className: "text-2xl font-black text-white tracking-tighter uppercase leading-none", children: selectedItem.food }), _jsxs("p", { className: "text-[11px] font-bold text-white/30 italic", children: ["\"", selectedItem.tagline, "\""] })] }), _jsxs("div", { className: "grid grid-cols-2 gap-3", children: [_jsxs("div", { className: "bg-white/5 p-4 rounded-2xl border border-white/5", children: [_jsx("span", { className: "text-[8px] font-black text-emerald-400 uppercase tracking-widest block mb-1", children: "Impact" }), _jsx("p", { className: "text-[10px] font-semibold text-white/70 leading-tight uppercase", children: selectedItem.impact })] }), _jsxs("div", { className: "bg-white/5 p-4 rounded-2xl border border-white/5", children: [_jsx("span", { className: "text-[8px] font-black text-indigo-400 uppercase tracking-widest block mb-1", children: "Biology" }), _jsx("p", { className: "text-[10px] font-semibold text-white/70 leading-tight uppercase", children: selectedItem.why })] })] }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex items-center gap-2 opacity-20", children: [_jsx(Info, { className: "w-3 h-3 text-white" }), _jsx("span", { className: "text-[9px] font-black text-white uppercase tracking-widest", children: "Biometric Profile" })] }), _jsx("div", { className: "grid grid-cols-1 gap-2", children: selectedItem.nutrients.map((n, i) => (_jsxs("div", { className: "px-4 py-2.5 rounded-xl bg-white/5 border border-white/5 flex items-center justify-between", children: [_jsx("span", { className: "text-[10px] font-black text-white/40 uppercase tracking-widest", children: n.name }), _jsx("span", { className: "text-[10px] font-black text-amber-500", children: n.value })] }, i))) })] }), _jsxs("button", { className: "w-full h-12 rounded-2xl bg-white text-black font-black uppercase text-[11px] tracking-widest shadow-xl active:scale-95 transition-all flex items-center justify-center gap-2", children: ["Update Bioplan ", _jsx(Plus, { className: "w-4 h-4" })] })] })] })] }))] }));
};
